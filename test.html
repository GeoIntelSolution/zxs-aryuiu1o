<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <script>
    let cc = AFRAME.registerComponent('rotation-reader', {
      init: function () {
        console.log('init')
      },
      update: function () {
        console.log('update')
      },
      /**
       * We use IIFE (immediately-invoked function expression) to only allocate one
       * vector or euler and not re-create on every tick to save memory.
       */
      tick: (function () {
        var position = new THREE.Vector3();
        var quaternion = new THREE.Quaternion();

        return function () {
          this.el.object3D.getWorldPosition(position);
          this.el.object3D.getWorldQuaternion(quaternion);
          // position and rotation now contain vector and quaternion in world space.
        };
      })()
    });
    console.log(cc)
  </script>
</head>

<body style="margin: 0; overflow: hidden;">
  <a-scene renderer="logarithmicDepthBuffer: true;" embedded loading-screen="enabled: false;"
    arjs="sourceType: webcam; debugUIEnabled: false;">
    <a-assets>
      <a-asset-item id="animated-asset" src="assets/Bee.glb"></a-asset-item>
    </a-assets>

    <a-entity look-at="[gps-projected-camera]" animation-mixer="loop: repeat" gltf-model="#animated-asset"
      scale="0.5 0.5 0.5" position="0 180 0"
      gps-entity-place="latitude: 30.182822202081955; longitude: -239.84835454124453;"></a-entity>



    <!-- <a-box color="yellow" gps-projected-entity-place="latitude: 30.5; longitude: -239.84835454124453;"
            scale="1 1 1 " /> -->
    <a-camera gps-projected-camera rotation-reader></a-camera>
  </a-scene>
</body>
<script>


  var sceneEl = document.querySelector('a-scene');
  let aa = sceneEl.querySelector('[gps-entity-place]')
  console.log(aa)

  function get_location () {
    var option = {
      enableHighAccuracy: true,

      timeout: Infinity,

      maximumAge: 0
    }

    navigator.geolocation.getCurrentPosition(geoSuccess, geoError, option);
  }

  function geoSuccess (event) {
    console.log(event.coords.latitude + ', ' + event.coords.longitude);

    lat = event.coords.latitude;

    lng = event.coords.longitude;

    console.log(lat, lng)

  }

  function geoError (event) {
    console.log("Error code " + event.code + ". " + event.message);

  }

  get_location();

</script>

</html>